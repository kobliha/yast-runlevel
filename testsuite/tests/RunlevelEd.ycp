{
    // testedfiles: RunlevelEd.ycp

    include "testsuite.ycp";

    map READ = $[
        "target" : $[
            "size" : 0,
        ],
        "init" : $[
            "scripts" : $[
                "runlevel_list" : ["A", "B", "C", "1", "2", "5"],
            ],
        ],
    ];

    map WRITE = $[
    ];

    map EXECUTE = $[
    ];

    TESTSUITE_INIT ([READ, WRITE, EXECUTE], nil);

    import "RunlevelEd";

    string separator = "---------------------------------";

    RunlevelEd::services = $[
        "a" : $[
            "reqstart" : [ "a-1", "a-2", "d" ],
        ],
        "b" : $[
            "reqstart" : [ "b-1", "b-2" ],
        ],
        "c" : $[
            "reqstart" : [ "c-1", "c-2" ],
        ],
        // service required by "a"
        "d" : $[
            "reqstart" : [ "boot.test", "boot.local_test", "d-1" ],
        ],
    ];
    // Usually done in Read() function
    RunlevelEd::BuildServicesRequirements();

    DUMP ("SystemRunlevels");
    TEST (``(RunlevelEd::SystemRunlevels()), [READ], nil);
    RunlevelEd::SetRunlevel4Support(true);
    TEST (``(RunlevelEd::SystemRunlevels()), [READ], nil);
    DUMP (separator);

    DUMP ("ServicesDependencies");
    TEST (``(RunlevelEd::ServicesDependencies(["c", "a"])), [READ], nil);
    DUMP (separator);
}
